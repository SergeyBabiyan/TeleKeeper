<p align="center">
  <img src="assets/banner4.png" style="width: 80%; height: auto;">
</p>

# TeleKeeper: ваше личное хранилище Telegram-аккаунтов

## О программе

Данная утилита представляет из себя хранилище Telegram-аккаунтов с удобным управлением через Telegram-бота. Программа позволяет пользователю безопасно подключать и управлять большим количеством Telegram-аккаунтов без необходимости хранить их в своем Telegram клиенте.

Программа уведомляет пользователя об успешном входе, ошибках авторизации и сообщениях от системного аккаунта Telegram Notifications, а также предоставляет информацию о каждом подключённом аккаунте.

---

## Функционал
- **Вход в Telegram аккаунт**
  - Ввод номера телефона
  - Ввод 2FA пароля(если есть)
  - Ввод кода подтверждения
- **Уведомления для пользователей**
  - Получение кода для авторизации от Telegram Notifications
  - Ошибка, при неудачной попытке входа
  - Успешный вход
- **Информация о сохраненнной сессии(Telegram аккаунте)**
  - Имя
  - Тег (@username)
  - Статус аккаунта
  - Дата последнего входа
- **Автоматический вход в сохраненные сессии (Telegram аккаунты) при перезапуске программы**

---

## Установка 

### Предварительная подготовка
   Перед установкой и запуском программы необходимо выполнить несколько действий:  

1. **Создание Telegram-бота и получение токена**  
   - Откройте Telegram и найдите пользователя [@BotFather](https://t.me/BotFather).  
   - Отправьте команду `/newbot` или откройте мини-приложение и следуйте дальнейшим инструкциям бота.  
   - После создания бот выдаст вам **токен**, который понадобится нам чуть позже.

2. **Создание Telegram-приложения для получения API_ID и API_HASH**  
   - Перейдите на сайт [my.telegram.org/](https://my.telegram.org/) и авторизуйтесь через ваш аккаунт Telegram.  
   - Перейдите в раздел **API Development Tools**.  
   - Нажмите **Create new application**.  
   - Укажите название приложения, короткое имя и при выборе платформы укажите Desktop.  
   - После создания вы получите **API_ID** и **API_HASH**.
  
4. **Установка необходимых инструментов**\
   Для дальнейшей работы вам **необходимо установить .NET SDK 9.0 и выше**, а также **Git**
   #### Для Windows
   - Установка [Git](https://git-scm.com/download).  
   - Установка [.NET SDK 9.0 и выше](https://dotnet.microsoft.com/en-us/download).
   #### Для Linux/VPS сервер
   - Установка Git
     ```bash
     sudo apt install git
     ```
   - Установка .NET SDK 9.0 и выше
     ```bash
     sudo apt install dotnet-sdk-9.0
     ```

   #### Проверка
    - Проверить установку можно с помощью следующих команд:
      ```bash
      git -v #проверка версии git
      dotnet --version #проверка версии dotnet
      ```

### Установка на Windows

1. **Клонируйте репозиторий:**\
   Для этого запустите powershell и введите следующие команды:

   ```bash
   cd path/to/directory # вместо path/to/directory, вставьте путь, куда будет копироваться программа
   git clone https://github.com/hackstiler/TeleKeeper
   cd TeleKeeper
   ```

2. **Настройте параметры запуска:**\
   Зайдите в директорию проекта и отредактируйте файл appsettings.json, заменив все значения на свои.
   Конфиг должен выглядить примерно следующим образом:
   ```json
   {
      "BOT_TOKEN": "YourBotToken",
      "APP_HASH": "YourApiHash",
      "APP_ID": "YourApiId",
      "ADMIN_ID": "TelegramUserId"
   }
   ```
3. **Компилируем программу:**\
   Предварительно создайте папку, куда вы хотите скомпилировать проект и вставьте путь до папки вместо ```path/to/directory```
   ```bash
   dotnet publish -p:PublishSingleFile=true --self-contained false -o path/to/directory # вместо path/to/directory, вставьте путь, куда будет скомпилирован проект
   ```
4. **Запускаем программу:**\
   Перейдите в директорию, куда была скомпилирована программа и запустите exe файл. Готово, теперь вы можете полноценно пользоваться ботом

### Установка на Linux/VPS сервер

1. **Клонируйте репозиторий:**\
   Для этого запустите terminal или подключитесь к серверу по SSH и введите следующие команды:

   ```bash
   git clone https://github.com/hackstiler/TeleKeeper
   cd TeleKeeper
   ```

2. **Настройте параметры запуска:**\
   Зайдите в директорию проекта, если вы в ней ещё не находитесь и отредактируйте файл appsettings.json, заменив все значения на свои. Это    можно сделать с помощью следующей команды:
   ```bash
   nano appsettings.json
   ```

   Конфиг должен выглядить примерно следующим образом:
   ```json
   {
      "BOT_TOKEN": "YourBotToken",
      "APP_HASH": "YourApiHash",
      "APP_ID": "YourApiId",
      "ADMIN_ID": "TelegramUserId"
   }
   ```
4. **Компиляция программы:**
   ```bash
   sudo mkdir /opt/TeleKeeper/
   sudo mkdir /opt/TeleKeeper/Sessions
   sudo dotnet publish -r linux-x64 -p:PublishSingleFile=true --self-contained false -o /opt/TeleKeeper/
   
   ```

5. **Выдаем права пользователю:**\
   Для более корректной работы утилы рекомендуется выдать пользователю доступ на редактирование рабочей директории программы
   ```bash
   sudo chown -R <username>:<username> /opt/TeleKeeper
   ```

7. **Создание сервиса (по желанию):**
  - Создайте файл сервиса:
    ```bash
    sudo nano /etc/systemd/system/telekeeper.service
    ```
  - Вставьте следующий код:
    ```ini
    [Unit]
    Description=TeleKeeper

    [Service]
    ExecStart=/opt/TeleKeeper/TeleKeeper
    ExecStop=/bin/kill `/opt/TeleKeeper/TeleKeeper`
    Restart=on-failure

    [Install]
    WantedBy=multi-user.target

    ``` 
  - Перезапустите ```systemd```, чтобы он увидел новый сервис:
    ```bash
    sudo systemctl daemon-reload
    ```
  - Запустите сервис
    ```bash
    sudo systemctl start telekeeper
    ```
 - Включите автозапуск программы при старте системы(по желанию)
   ```bash
   sudo systemctl enable telekeeper
   ```

---

## Использование 
### Знакомство с программой:
  Запускаем программу и переходим в Telegram-бота. После написания команды ```/start``` перед вами должно появиться следующее меню:
  - Добавить аккаунт — привязка аккаунта, для дальнейшего хранения
  - Список аккаунтов — отображение всех сохраненных сессий(Telegram-аккаунтов)

### Добавление аккаунта:
1. Напишите команду ```/start ```
3. В появившемся меню нажмите на кнопку "Добавить профиль"
4. Введите номер телефона
5. Введите 2FA пароль (если есть, иначе отправьте '-')
6. Введите код, отправленный вам в Telegram

### Просмотр сохраненных сессий
1. Напишите команду ```/start ```
2. В появившемся меню нажмите на кнопку "Список аккаунтов"

### Удаление сохраненной сессии
1. Напишите команду ```/start ```
2. В появившемся меню нажмите на кнопку "Список аккаунтов"
3. Выбираем интересующий нас аккаунт и жмем на него
4. В появившемся меню нажимаем кнопку "Удалить аккаунт"

### Просмотр данных о сохраненной сессии
1. Напишите команду ```/start ```
2. В появившемся меню нажмите на кнопку "Список аккаунтов"
3. Выбираем интересующий нас аккаунт и жмем на него

### Получение кода для входа на сохраненный аккаунт с другого устройства
1. Входим на аккаунт с другого устройства по номеру телефона
2. Когда Telegram попросит ввести код потдверждения, бот отправит вам код, который приходит от официального аккаунта Telegram Notifications

